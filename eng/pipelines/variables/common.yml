variables:
- template: ../../common/templates/variables/dotnet/build-test-publish.yml
- name: manifest
  value: manifest.json
- name: dotnetVersion
  value: '*'
- name: osVariant
  value: ''
- name: publishReadme
  value: false
- name: publicGitRepoUri
  value: https://github.com/dotnet/dotnet-buildtools-prereqs-docker
- ${{ if eq(variables['Build.SourceBranch'], 'refs/heads/production') }}:
  - name: manifestVariables
    value: --var UniqueId=$(sourceBuildId) --var LatestTag=latest
- ${{ else }}:
  - name: manifestVariables
    value: --var UniqueId=$(sourceBuildId) --var LatestTag=staging
- name: publicSourceBranch
  value: main
- name: ingestKustoImageInfo
  value: false
- name: testScriptPath
  value: ""
- ${{ if eq(variables['System.TeamProject'], 'internal') }}:
  - name: build.imageBuilderDockerRunExtraOptions
    value: -e DOCKER_REPO=$(acr.server)/$(stagingRepoPrefix)dotnet-buildtools/prereqs